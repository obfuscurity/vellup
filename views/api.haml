
%h1 API Documentation

%h2 Add new site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' -d 'name=test2' -X POST \
        https://vellup-api.herokuapp.com/sites/add 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 201 Created
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 140
      Connection: keep-alive
      
      {
        "uuid":"44ff20a01082012fc1461231381ffccb",
        "name":"test2",
        "created_at":"2011-12-24 17:25:59 +0000",
        "updated_at":"2011-12-24 17:25:59 +0000"
      }

%h2 List sites

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        https://vellup-api.herokuapp.com/sites 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 141
      Connection: keep-alive
      
      [
        {
          "uuid": "402d32600f1a012fa648109addaa2672",
          "name": "test",
          "created_at": "2011-12-22 17:28:52 +0000",
          "updated_at": "2011-12-22 23:09:13 +0000"
        },
        {
          "uuid":"44ff20a01082012fc1461231381ffccb",
          "name":"test2",
          "created_at":"2011-12-24 17:25:59 +0000",
          "updated_at":"2011-12-24 17:25:59 +0000"
        }
      ]

%h2 Get site info

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 139
      Connection: keep-alive
      
      {
        "uuid": "402d32600f1a012fa648109addaa2672",
        "name": "test",
        "created_at": "2011-12-22 17:28:52 +0000",
        "updated_at": "2011-12-22 23:09:13 +0000"
      }

%h2 Delete a site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' -X DELETE \
        https://vellup-api.herokuapp.com/sites/44ff20a01082012fc1461231381ffccb 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 204 No Content
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Connection: keep-alive

%h2 Add new user for a site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        -d 'username=testy8@dixongroup.net' -d 'password=changeme' -d 'firstname=Testy8' -d 'lastname=Tester' -X POST \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672/users/add 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 201 Created
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id":14,
        "username":"testy8@dixongroup.net",
        "firstname":"Testy8",
        "lastname":"Tester",
        "confirmed":true,
        "created_at":"2011-12-24 17:42:10 +0000",
        "updated_at":"2011-12-24 17:42:10 +0000",
        "confirmed_at":"2011-12-24 17:42:10 +0000",
        "authenticated_at":null,
        "visited_at":null
      }

%h2 List users for a site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672/users 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 541
      Connection: keep-alive
      
      [
        {
          "id": 12,
          "username": "testy6@dixongroup.net",
          "firstname": "Testy6",
          "lastname": "Tester",
          "confirmed": true,
          "created_at": "2011-12-23 20:08:09 +0000",
          "updated_at": "2011-12-23 20:25:23 +0000",
          "confirmed_at": "2011-12-23 20:08:09 +0000",
          "authenticated_at": null,
          "visited_at": null
        },
        {
          "id": 13,
          "username": "testy7@dixongroup.net",
          "firstname": "Testy7",
          "lastname": "Tester",
          "confirmed": true,
          "created_at": "2011-12-23 20:26:12 +0000",
          "updated_at": "2011-12-23 20:27:40 +0000",
          "confirmed_at": "2011-12-23 20:26:12 +0000",
          "authenticated_at": null,
          "visited_at": null
        },
        {
          "id":14,
          "username":"testy8@dixongroup.net",
          "firstname":"Testy8",
          "lastname":"Tester",
          "confirmed":true,
          "created_at":"2011-12-24 17:42:10 +0000",
          "updated_at":"2011-12-24 17:42:10 +0000",
          "confirmed_at":"2011-12-24 17:42:10 +0000",
          "authenticated_at":null,
          "visited_at":null
        }
      ]

%h2 Get user info

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672/users/13 2>/dev/null 

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@dixongroup.net",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-24 14:39:09 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Modifying a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' -d 'password=changeme' -X PUT \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672/users/13

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@dixongroup.net",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-24 14:39:09 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Authenticating a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' \
        -d 'username=testy7@dixongroup.net' -d 'password=changeme' -X POST \
        https://vellup-api.herokuapp.com/sites/402d32600f1a012fa648109addaa2672/users/13/auth 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@dixongroup.net",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-23 20:27:40 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Deleting a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:3181a770-100d-012f-a650-109addaa2672' -X DELETE \
        http://localhost:4567/sites/402d32600f1a012fa648109addaa2672/users/14 2>/dev/null

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 204 No Content
      X-Frame-Options: sameorigin
      X-XSS-Protection: 1; mode=block
      Connection: close
      Server: thin 1.2.11 codename Bat-Shit Crazy

