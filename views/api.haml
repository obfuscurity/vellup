
%h1 API Documentation

%h2 Add new site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'name=test2' \
        -d 'schema={"name":"User","properties":{"firstname":{"description":"Name","type":"string","minLength":1,"required":false}}}' \
        -X POST https://vellup-api.herokuapp.com/sites/add

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 201 Created
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 284
      Connection: keep-alive
      
      {
        "uuid":"12650123ab908432abbacc1234",
        "name":"test2",
        "schema":"{\"name\":\"User\",\"properties\":{\"firstname\":{\"description\":\"Name\",\"type\":\"string\",\"minLength\":1,\"required\":false}}}",
        "created_at":"2011-12-24 17:25:59 +0000",
        "updated_at":"2011-12-24 17:25:59 +0000"
      }

%h2 List sites

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        https://vellup-api.herokuapp.com/sites

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 141
      Connection: keep-alive
      
      [
        {
          "uuid": "98790123ab908098abffad4328",
          "name": "test",
          "schema": "{\"name\":\"User\",\"properties\":{\"firstname\":{\"description\":\"Name\",\"type\":\"string\",\"minLength\":1,\"required\":false}}}",
          "created_at": "2011-12-22 17:28:52 +0000",
          "updated_at": "2011-12-22 23:09:13 +0000"
        },
        {
          "uuid":"12650123ab908432abbacc1234",
          "name":"test2",
          "schema": "{\"name\":\"User\",\"properties\":{\"firstname\":{\"description\":\"Name\",\"type\":\"string\",\"minLength\":1,\"required\":false}}}",
          "created_at":"2011-12-24 17:25:59 +0000",
          "updated_at":"2011-12-24 17:25:59 +0000"
        }
      ]

%h2 Get site info

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 139
      Connection: keep-alive
      
      {
        "uuid": "98790123ab908098abffad4328",
        "name": "test",
        "created_at": "2011-12-22 17:28:52 +0000",
        "updated_at": "2011-12-22 23:09:13 +0000"
      }

%h2 Delete a site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -X DELETE https://vellup-api.herokuapp.com/sites/12650123ab908432abbacc1234

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 204 No Content
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Connection: keep-alive

%h2 Add new user for a site

%p By default, adding a user with this endpoint assumes that the user account is confirmed and no further verification is necessary. If you want to force email verification by the user, set the <strong>confirmed</strong> and <strong>send_confirmation_email</strong> parameters accordingly.

%h3 Optional Parameters

%dl
  %dt confirmed=false
  %dd Require verification by the user. This can be performed using Vellup email confirmation (see <strong>send_confirmation_email</strong>) or your own custom method. The response will include a <strong>confirm_token</strong> value for completing confirmation. See the <strong>Confirm a new user</strong> section for steps to complete confirmation. (<i>Default:</i> true)
  %dt send_confirmation_email=true
  %dd Send the user a standard Vellup confirmation email. Ignored where <b>confirmed=true</b>. (<i>Default:</i> false)

%h3 Request (default)

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'username=testy8@domain.com' \
        -d 'password=changeme' \
        -d 'firstname=Testy8' \
        -d 'lastname=Tester' \
        -X POST https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/add

%h3 Response (default)

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 201 Created
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id":14,
        "username":"testy8@domain.com",
        "firstname":"Testy8",
        "lastname":"Tester",
        "confirmed":true,
        "created_at":"2011-12-24 17:42:10 +0000",
        "updated_at":"2011-12-24 17:42:10 +0000",
        "confirmed_at":"2011-12-24 17:42:10 +0000",
        "authenticated_at":null,
        "visited_at":null
      }

%h3 Request (confirmation disabled)

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'username=testy8@domain.com' \
        -d 'password=changeme' \
        -d 'firstname=Testy8' \
        -d 'lastname=Tester' \
        -d 'confirmed=false' \
        -d 'send_confirmation_email=true' \
        -X POST https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/add

%h3 Response (confirmation disabled)

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 201 Created
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id":15,
        "username":"testy9@domain.com",
        "firstname":"Testy9",
        "lastname":"Tester",
        "confirm_token": "763f64f0-14d6-012f-a668-109addaa2672",
        "confirmed": false,
        "created_at": "2011-12-30 00:38:44 -0500",
        "updated_at": "2011-12-30 00:38:44 -0500",
        "confirmed_at": null,
        "authenticated_at":null,
        "visited_at":null
      }

%h2 Confirm a new user

%p This step is only required if <strong>confirmed=false</strong> parameter was passed during user creation. 

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'confirm_token=763f64f0-14d6-012f-a668-109addaa2672' \
        -X POST http://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/confirm

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      X-Frame-Options: sameorigin
      X-XSS-Protection: 1; mode=block
      Content-Type: application/json;charset=utf-8
      Content-Length: 269
      Connection: keep-alive
      Server: thin 1.2.11 codename Bat-Shit Crazy

      {
        "id": 57,
        "username": "testy9@dixongroup.net",
        "firstname": "Testy9",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-30 00:38:44 -0500",
        "updated_at": "2011-12-30 00:43:01 -0500",
        "confirmed_at": "2011-12-30 00:43:01 -0500",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 List users for a site

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 541
      Connection: keep-alive
      
      [
        {
          "id": 12,
          "username": "testy6@domain.com",
          "firstname": "Testy6",
          "lastname": "Tester",
          "confirmed": true,
          "created_at": "2011-12-23 20:08:09 +0000",
          "updated_at": "2011-12-23 20:25:23 +0000",
          "confirmed_at": "2011-12-23 20:08:09 +0000",
          "authenticated_at": null,
          "visited_at": null
        },
        {
          "id": 13,
          "username": "testy7@domain.com",
          "firstname": "Testy7",
          "lastname": "Tester",
          "confirmed": true,
          "created_at": "2011-12-23 20:26:12 +0000",
          "updated_at": "2011-12-23 20:27:40 +0000",
          "confirmed_at": "2011-12-23 20:26:12 +0000",
          "authenticated_at": null,
          "visited_at": null
        },
        {
          "id":14,
          "username":"testy8@domain.com",
          "firstname":"Testy8",
          "lastname":"Tester",
          "confirmed":true,
          "created_at":"2011-12-24 17:42:10 +0000",
          "updated_at":"2011-12-24 17:42:10 +0000",
          "confirmed_at":"2011-12-24 17:42:10 +0000",
          "authenticated_at":null,
          "visited_at":null
        }
      ]

%h2 Get user info

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/13

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@domain.com",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-24 14:39:09 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Modifying a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'password=changeme' \
        -X PUT https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/13

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@domain.com",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-24 14:39:09 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Authenticating a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -d 'username=testy7@domain.com' \
        -d 'password=changeme' \
        -X POST https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/auth

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 200 OK
      Content-Type: application/json;charset=utf-8
      Server: thin 1.2.10 codename I'm dumb
      X-Frame-Options: sameorigin
      X-Xss-Protection: 1; mode=block
      Content-Length: 269
      Connection: keep-alive
      
      {
        "id": 13,
        "username": "testy7@domain.com",
        "firstname": "Testy7",
        "lastname": "Tester",
        "confirmed": true,
        "created_at": "2011-12-23 20:26:12 +0000",
        "updated_at": "2011-12-23 20:27:40 +0000",
        "confirmed_at": "2011-12-23 20:26:12 +0000",
        "authenticated_at": null,
        "visited_at": null
      }

%h2 Deleting a user

%h3 Request

%blockquote
  %pre.code
    :preserve
      $ curl -i -H 'X_API_VERSION:1' -H 'X_API_TOKEN:4192x459-a0b0-243fdaffb1239' \
        -X DELETE https://vellup-api.herokuapp.com/sites/98790123ab908098abffad4328/users/14

%h3 Response

%blockquote
  %pre.code
    :preserve
      HTTP/1.1 204 No Content
      X-Frame-Options: sameorigin
      X-XSS-Protection: 1; mode=block
      Connection: close
      Server: thin 1.2.11 codename Bat-Shit Crazy

